{"ast":null,"code":"export default {\n  name: \"Orders\",\n  data() {\n    return {\n      orders: [],\n      filteredOrders: [],\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      role: '' // 用户角色\n    };\n  },\n\n  methods: {\n    fetchOrders() {\n      this.$request.get(`/orders/page?page=${1}&pageSize=${100}`).then(response => {\n        this.orders = response.data;\n        console.log(this.orders);\n        this.filterOrders();\n      });\n    },\n    filterOrders() {\n      // 从浏览器缓存中获取角色\n      if (this.user.role === 'USER') {\n        this.filteredOrders = this.orders.filter(order => order.user_id === this.user.id);\n      } else if (this.user.role === 'FARMER') {\n        this.filteredOrders = this.orders.filter(order => order.farmer_id === this.user.id);\n      }\n      console.log(this.filteredOrders);\n    }\n  },\n  mounted() {\n    this.fetchOrders();\n  }\n};","map":{"version":3,"names":["name","data","orders","filteredOrders","user","JSON","parse","localStorage","getItem","role","methods","fetchOrders","$request","get","then","response","console","log","filterOrders","filter","order","user_id","id","farmer_id","mounted"],"sources":["src/views/User/Orders.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>订单信息</h2>\r\n    <div v-for=\"order in filteredOrders\" :key=\"order.id\" class=\"order-card\">\r\n      <img :src=\"order.crop_avatar\" alt=\"Crop Avatar\" />\r\n      <h3>{{ order.type }}</h3>\r\n      <p>用户名: {{ order.username }} ({{ order.user_email }})</p>\r\n      <p>农户姓名: {{ order.farmer_name }} ({{ order.farmer_email }})</p>\r\n      <p>区域面积: {{ order.area }} 平方米</p>\r\n      <p>状态: {{ order.status }}</p>\r\n      <p>种植开始时间: {{ order.begin_time }}</p>\r\n      <p>收割结束时间: {{ order.end_time }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n\r\n  name: \"Orders\",\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      filteredOrders: [],\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      role: '', // 用户角色\r\n    };\r\n  },\r\n  methods: {\r\n    fetchOrders() {\r\n      this.$request.get(`/orders/page?page=${1}&pageSize=${100}`).then(response => {\r\n\r\n        this.orders = response.data;\r\n        console.log(this.orders);\r\n        this.filterOrders();\r\n      });\r\n    },\r\n    filterOrders() {\r\n      // 从浏览器缓存中获取角色\r\n      if (this.user.role === 'USER') {\r\n        this.filteredOrders = this.orders.filter(order => order.user_id === this.user.id);\r\n      } else if (this.user.role === 'FARMER') {\r\n        this.filteredOrders = this.orders.filter(order => order.farmer_id === this.user.id);\r\n      }\r\n\r\n      console.log(this.filteredOrders);\r\n\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchOrders();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.order-card {\r\n  border: 1px solid #ddd;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n}\r\n.order-card img {\r\n  max-width: 100px;\r\n  display: block;\r\n}\r\n</style>\r\n"],"mappings":"AAkBA;EAEAA,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,cAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,IAAA;IACA;EACA;;EACAC,OAAA;IACAC,YAAA;MACA,KAAAC,QAAA,CAAAC,GAAA,2CAAAC,IAAA,CAAAC,QAAA;QAEA,KAAAb,MAAA,GAAAa,QAAA,CAAAd,IAAA;QACAe,OAAA,CAAAC,GAAA,MAAAf,MAAA;QACA,KAAAgB,YAAA;MACA;IACA;IACAA,aAAA;MACA;MACA,SAAAd,IAAA,CAAAK,IAAA;QACA,KAAAN,cAAA,QAAAD,MAAA,CAAAiB,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAC,OAAA,UAAAjB,IAAA,CAAAkB,EAAA;MACA,gBAAAlB,IAAA,CAAAK,IAAA;QACA,KAAAN,cAAA,QAAAD,MAAA,CAAAiB,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAG,SAAA,UAAAnB,IAAA,CAAAkB,EAAA;MACA;MAEAN,OAAA,CAAAC,GAAA,MAAAd,cAAA;IAEA;EACA;EACAqB,QAAA;IACA,KAAAb,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}