{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"Orders\",\n  data() {\n    return {\n      orders: [],\n      filteredOrders: [],\n      role: '' // 用户角色\n    };\n  },\n\n  methods: {\n    fetchOrders() {\n      this.$request.get(`/orders/page?page=${1}&pageSize=${100}`).then(response => {\n        this.orders = response.data;\n        console.log(this.orders);\n        this.filterOrders();\n      });\n    },\n    filterOrders() {\n      // 从浏览器缓存中获取角色\n      this.role = localStorage.getItem('role');\n      if (this.role === 'USER') {\n        this.filteredOrders = this.orders.filter(order => order.user_id === this.getUserId());\n      } else if (this.role === 'FARMER') {\n        this.filteredOrders = this.orders.filter(order => order.farmer_id === this.getFarmerId());\n      }\n      console.log(this.filteredOrders);\n    },\n    getUserId() {\n      // 根据实际情况获取用户ID\n      console.log(Number(localStorage.getItem('id')));\n      return Number(localStorage.getItem('id'));\n    },\n    getFarmerId() {\n      // 根据实际情况获取农户ID\n      console.log(Number(localStorage.getItem('id')));\n      return Number(localStorage.getItem('id'));\n    }\n  },\n  mounted() {\n    this.fetchOrders();\n  }\n};","map":{"version":3,"names":["axios","name","data","orders","filteredOrders","role","methods","fetchOrders","$request","get","then","response","console","log","filterOrders","localStorage","getItem","filter","order","user_id","getUserId","farmer_id","getFarmerId","Number","mounted"],"sources":["src/views/User/Orders.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>订单信息</h2>\r\n    <div v-for=\"order in filteredOrders\" :key=\"order.id\" class=\"order-card\">\r\n      <img :src=\"order.crop_avatar\" alt=\"Crop Avatar\" />\r\n      <h3>{{ order.type }}</h3>\r\n      <p>用户名: {{ order.username }} ({{ order.user_email }})</p>\r\n      <p>农户姓名: {{ order.farmer_name }} ({{ order.farmer_email }})</p>\r\n      <p>区域面积: {{ order.area }} 平方米</p>\r\n      <p>状态: {{ order.status }}</p>\r\n      <p>种植开始时间: {{ order.begin_time }}</p>\r\n      <p>收割结束时间: {{ order.end_time }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n\r\n  name: \"Orders\",\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      filteredOrders: [],\r\n      role: '', // 用户角色\r\n    };\r\n  },\r\n  methods: {\r\n    fetchOrders() {\r\n      this.$request.get(`/orders/page?page=${1}&pageSize=${100}`).then(response => {\r\n\r\n        this.orders = response.data;\r\n        console.log(this.orders);\r\n        this.filterOrders();\r\n      });\r\n    },\r\n    filterOrders() {\r\n      // 从浏览器缓存中获取角色\r\n      this.role = localStorage.getItem('role');\r\n      if (this.role === 'USER') {\r\n        this.filteredOrders = this.orders.filter(order => order.user_id === this.getUserId());\r\n      } else if (this.role === 'FARMER') {\r\n        this.filteredOrders = this.orders.filter(order => order.farmer_id === this.getFarmerId());\r\n      }\r\n\r\n      console.log(this.filteredOrders);\r\n\r\n    },\r\n    getUserId() {\r\n      // 根据实际情况获取用户ID\r\n      console.log(Number(localStorage.getItem('id')));\r\n      return Number(localStorage.getItem('id'));\r\n    },\r\n    getFarmerId() {\r\n      // 根据实际情况获取农户ID\r\n      console.log(Number(localStorage.getItem('id')));\r\n      return Number(localStorage.getItem('id'));\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchOrders();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.order-card {\r\n  border: 1px solid #ddd;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n}\r\n.order-card img {\r\n  max-width: 100px;\r\n  display: block;\r\n}\r\n</style>\r\n"],"mappings":"AAiBA,OAAAA,KAAA;AAEA;EAEAC,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,cAAA;MACAC,IAAA;IACA;EACA;;EACAC,OAAA;IACAC,YAAA;MACA,KAAAC,QAAA,CAAAC,GAAA,2CAAAC,IAAA,CAAAC,QAAA;QAEA,KAAAR,MAAA,GAAAQ,QAAA,CAAAT,IAAA;QACAU,OAAA,CAAAC,GAAA,MAAAV,MAAA;QACA,KAAAW,YAAA;MACA;IACA;IACAA,aAAA;MACA;MACA,KAAAT,IAAA,GAAAU,YAAA,CAAAC,OAAA;MACA,SAAAX,IAAA;QACA,KAAAD,cAAA,QAAAD,MAAA,CAAAc,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAC,OAAA,UAAAC,SAAA;MACA,gBAAAf,IAAA;QACA,KAAAD,cAAA,QAAAD,MAAA,CAAAc,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAG,SAAA,UAAAC,WAAA;MACA;MAEAV,OAAA,CAAAC,GAAA,MAAAT,cAAA;IAEA;IACAgB,UAAA;MACA;MACAR,OAAA,CAAAC,GAAA,CAAAU,MAAA,CAAAR,YAAA,CAAAC,OAAA;MACA,OAAAO,MAAA,CAAAR,YAAA,CAAAC,OAAA;IACA;IACAM,YAAA;MACA;MACAV,OAAA,CAAAC,GAAA,CAAAU,MAAA,CAAAR,YAAA,CAAAC,OAAA;MACA,OAAAO,MAAA,CAAAR,YAAA,CAAAC,OAAA;IACA;EACA;EACAQ,QAAA;IACA,KAAAjB,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}