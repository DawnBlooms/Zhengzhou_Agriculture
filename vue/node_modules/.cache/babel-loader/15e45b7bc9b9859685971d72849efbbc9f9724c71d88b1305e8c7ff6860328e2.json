{"ast":null,"code":"export default {\n  name: \"Orders\",\n  data() {\n    return {\n      orders: [],\n      filteredOrders: [],\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}')\n    };\n  },\n  methods: {\n    fetchOrders() {\n      this.$request.get(`/orders/page?page=1&pageSize=100`).then(response => {\n        this.orders = response.data;\n        this.filterOrders();\n      });\n    },\n    filterOrders() {\n      // 根据用户角色分拣订单数据\n      if (this.user.role === 'USER') {\n        this.filteredOrders = this.orders.filter(order => order.user_id === this.user.id);\n      } else if (this.user.role === 'FARMER') {\n        this.filteredOrders = this.orders.filter(order => order.farmer_id === this.user.id);\n      }\n    }\n  },\n  mounted() {\n    this.fetchOrders();\n  }\n};","map":{"version":3,"names":["name","data","orders","filteredOrders","user","JSON","parse","localStorage","getItem","methods","fetchOrders","$request","get","then","response","filterOrders","role","filter","order","user_id","id","farmer_id","mounted"],"sources":["src/views/User/Orders.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>订单信息</h2>\r\n    <div v-for=\"order in filteredOrders\" :key=\"order.id\" class=\"order-card\">\r\n      <div class=\"order-card-content\">\r\n        <!-- 左边图片 -->\r\n        <div class=\"image-container\">\r\n          <img :src=\"order.crop_avatar\" alt=\"Crop Avatar\" />\r\n        </div>\r\n        <!-- 右边文字 -->\r\n        <div class=\"details-container\">\r\n          <h3>{{ order.type }}</h3>\r\n          <div v-if=\"user.role === 'USER'\">\r\n            <p>农户姓名: {{ order.farmer_name }}</p>\r\n            <p>农户邮箱: {{ order.farmer_email }}</p>\r\n          </div>\r\n          <div v-else-if=\"user.role === 'FARMER'\">\r\n            <p>用户名: {{ order.username }}</p>\r\n            <p>用户邮箱: {{ order.user_email }}</p>\r\n          </div>\r\n          <p>区域面积: {{ order.area }} 平方米</p>\r\n          <p>种植状态: {{ order.status }}</p>\r\n          <p>开始时间: {{ order.begin_time }}</p>\r\n          <p>结束时间: {{ order.end_time }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Orders\",\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      filteredOrders: [],\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n    };\r\n  },\r\n  methods: {\r\n    fetchOrders() {\r\n      this.$request.get(`/orders/page?page=1&pageSize=100`).then(response => {\r\n        this.orders = response.data;\r\n        this.filterOrders();\r\n      });\r\n    },\r\n    filterOrders() {\r\n      // 根据用户角色分拣订单数据\r\n      if (this.user.role === 'USER') {\r\n        this.filteredOrders = this.orders.filter(order => order.user_id === this.user.id);\r\n      } else if (this.user.role === 'FARMER') {\r\n        this.filteredOrders = this.orders.filter(order => order.farmer_id === this.user.id);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchOrders();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.order-card {\r\n  display: flex;\r\n  border: 1px solid #ddd;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  align-items: center;\r\n}\r\n.image-container img {\r\n  max-width: 120px;\r\n  height: auto;\r\n  border-radius: 8px;\r\n  margin-right: 16px;\r\n}\r\n.details-container {\r\n  flex: 1;\r\n}\r\n</style>\r\n"],"mappings":"AA+BA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,cAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAC,QAAA,CAAAC,GAAA,qCAAAC,IAAA,CAAAC,QAAA;QACA,KAAAZ,MAAA,GAAAY,QAAA,CAAAb,IAAA;QACA,KAAAc,YAAA;MACA;IACA;IACAA,aAAA;MACA;MACA,SAAAX,IAAA,CAAAY,IAAA;QACA,KAAAb,cAAA,QAAAD,MAAA,CAAAe,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAC,OAAA,UAAAf,IAAA,CAAAgB,EAAA;MACA,gBAAAhB,IAAA,CAAAY,IAAA;QACA,KAAAb,cAAA,QAAAD,MAAA,CAAAe,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAG,SAAA,UAAAjB,IAAA,CAAAgB,EAAA;MACA;IACA;EACA;EACAE,QAAA;IACA,KAAAZ,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}