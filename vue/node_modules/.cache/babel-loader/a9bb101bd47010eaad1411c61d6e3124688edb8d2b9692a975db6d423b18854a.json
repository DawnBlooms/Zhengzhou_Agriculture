{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"OrderDetail\",\n  data() {\n    return {\n      order: {},\n      dialogVisible: false,\n      id: 0,\n      form: {}\n    };\n  },\n  mounted() {\n    this.id = this.$route.params.id;\n    this.fetchOrderDetails();\n  },\n  methods: {\n    fetchOrderDetails() {\n      this.$request.get(\"/orders/selectId\", {\n        params: {\n          id: this.id\n        }\n      }).then(response => {\n        if (response.code === \"200\") {\n          this.order = response.data;\n        } else {\n          this.$message.error(\"数据获取错误\");\n        }\n      });\n    },\n    del(id) {\n      // 单个删除\n      this.$confirm('您确定取消吗？', '确认删除', {\n        type: \"warning\"\n      }).then(response => {\n        this.$request.delete('/orders/delete/' + id).then(res => {\n          if (res.code === '200') {\n            // 表示操作成功\n            this.$message.success('取消成功');\n            this.$router.push('/user/orders');\n          } else {\n            this.$message.error(res.msg); // 弹出错误的信息\n          }\n        });\n      }).catch(() => {});\n    },\n    openOrderDialog() {\n      this.dialogVisible = true; // 打开订购弹窗\n      this.form = this.order;\n    },\n    submitOrder() {\n      const orderData = {\n        id: this.order.id,\n        area: this.form.area\n      };\n      this.$request.put('/orders/update', orderData).then(response => {\n        if (response.code === \"200\") {\n          this.$message.success(\"修改成功！\");\n          this.dialogVisible = false; // 关闭弹窗\n          this.resetOrderForm(); // 重置表单\n        } else {\n          this.$message.error(response.msg);\n        }\n      }).catch(error => {\n        this.$message.error(\"订购失败，请重试\");\n      });\n    },\n    resetOrderForm() {\n      this.orderForm = {\n        area: 1,\n        begin_time: null,\n        end_time: null\n      };\n    }\n  }\n};","map":{"version":3,"names":["name","data","order","dialogVisible","id","form","mounted","$route","params","fetchOrderDetails","methods","$request","get","then","response","code","$message","error","del","$confirm","type","delete","res","success","$router","push","msg","catch","openOrderDialog","submitOrder","orderData","area","put","resetOrderForm","orderForm","begin_time","end_time"],"sources":["src/views/User/OrderDetails.vue"],"sourcesContent":["<template>\r\n  <div class=\"order-detail-container\">\r\n    <h2 class=\"order-title\">订单详情</h2>\r\n\r\n    <!-- 作物图片 -->\r\n    <div class=\"crop-image-container\">\r\n      <img :src=\"order.crop_avatar || 'https://via.placeholder.com/300'\" alt=\"Crop Avatar\" class=\"crop-image\" />\r\n    </div>\r\n    \r\n    <!-- 订单信息 -->\r\n    <div class=\"order-details\">\r\n      <!-- 左侧信息 -->\r\n      <div class=\"left-column\">\r\n        <p><strong>农户姓名:</strong> {{ order.farmer_name }}</p>\r\n        <p><strong>农户邮箱:</strong> {{ order.farmer_email }}</p>\r\n        <p><strong>农户手机号:</strong> {{ order.farmer_phone }}</p>\r\n      </div>\r\n      <!-- 右侧信息 -->\r\n      <div class=\"right-column\">\r\n        <p><strong>区域面积:</strong> {{ order.area }} 平方米</p>\r\n        <p><strong>种植状态:</strong> {{ order.status }}</p>\r\n        <p><strong>预计结束时间:</strong> {{ order.predict }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 操作按钮 -->\r\n    <div class=\"actions\">\r\n      <button\r\n          :disabled=\"order.status === '已种植'\"\r\n          @click=\"openOrderDialog\"\r\n          class=\"button primary\">\r\n        修改订单\r\n      </button>\r\n      <button\r\n          :disabled=\"order.status === '已种植'\"\r\n          @click=\"del(order.id)\"\r\n          class=\"button danger\">\r\n        取消订单\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 弹窗 -->\r\n    <el-dialog title=\"订购作物\" :visible.sync=\"dialogVisible\">\r\n      <el-form :model=\"form\">\r\n        <el-form-item label=\"种植面积(亩)\" required>\r\n          <el-input v-model=\"form.area\" type=\"number\" min=\"1\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitOrder\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"OrderDetail\",\r\n  data() {\r\n    return {\r\n      order: {},\r\n      dialogVisible: false,\r\n      id: 0,\r\n      form: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id;\r\n    this.fetchOrderDetails();\r\n  },\r\n  methods: {\r\n    fetchOrderDetails() {\r\n      this.$request\r\n          .get(\"/orders/selectId\", { params: { id: this.id } })\r\n          .then((response) => {\r\n            if (response.code === \"200\") {\r\n              this.order = response.data;\r\n            } else {\r\n              this.$message.error(\"数据获取错误\");\r\n            }\r\n          });\r\n    },\r\n    del(id) {   // 单个删除\r\n      this.$confirm('您确定取消吗？', '确认删除', {type: \"warning\"}).then(response => {\r\n        this.$request.delete('/orders/delete/' + id).then(res => {\r\n          if (res.code === '200') {   // 表示操作成功\r\n            this.$message.success('取消成功')\r\n            this.$router.push('/user/orders');\r\n          } else {\r\n            this.$message.error(res.msg)  // 弹出错误的信息\r\n          }\r\n        })\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    openOrderDialog() {\r\n      this.dialogVisible = true; // 打开订购弹窗\r\n      this.form = this.order\r\n    },\r\n    submitOrder() {\r\n      const orderData = {\r\n        id: this.order.id,\r\n        area: this.form.area,\r\n      };\r\n\r\n      this.$request.put('/orders/update', orderData)\r\n          .then(response => {\r\n            if (response.code === \"200\") {\r\n              this.$message.success(\"修改成功！\");\r\n              this.dialogVisible = false; // 关闭弹窗\r\n              this.resetOrderForm(); // 重置表单\r\n            } else {\r\n              this.$message.error(response.msg);\r\n            }\r\n          })\r\n          .catch(error => {\r\n            this.$message.error(\"订购失败，请重试\");\r\n          });\r\n    },\r\n    resetOrderForm() {\r\n      this.orderForm = {\r\n        area: 1,\r\n        begin_time: null,\r\n        end_time: null,\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.order-detail-container {\r\n  max-width: 800px;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  border-radius: 10px;\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.order-title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\n.crop-image-container {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.crop-image {\r\n  width: 100%;\r\n  max-width: 500px;\r\n  height: 300px;\r\n  border-radius: 10px;\r\n  object-fit: cover;\r\n  border: 2px solid #ddd;\r\n}\r\n\r\n.order-details {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 10px;\r\n}\r\n\r\n.left-column,\r\n.right-column {\r\n  flex: 1;\r\n  font-size: 16px;\r\n  color: #555;\r\n  line-height: 1.8;\r\n}\r\n\r\n.left-column p,\r\n.right-column p {\r\n  margin: 8px 0;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 20px; /* 增加按钮之间的间距 */\r\n  margin-top: 30px;\r\n}\r\n\r\n.button {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  color: #fff;\r\n}\r\n\r\n.button:disabled {\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n\r\n\r\n.button.primary {\r\n  background-color: #409eff; /* 默认主题色 */\r\n}\r\n\r\n.button.primary:hover {\r\n  background-color: #66b1ff;\r\n}\r\n\r\n.button.danger {\r\n  background-color: #f56c6c; /* 红色警告按钮 */\r\n}\r\n\r\n.button.danger:hover {\r\n  background-color: #ff9999;\r\n}\r\n\r\n.button:active {\r\n  transform: scale(0.98); /* 按下时的微缩效果 */\r\n}\r\n\r\n\r\n.el-dialog .dialog-footer {\r\n  text-align: right;\r\n}\r\n</style>\r\n\r\n"],"mappings":";AAyDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,aAAA;MACAC,EAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAF,EAAA,QAAAG,MAAA,CAAAC,MAAA,CAAAJ,EAAA;IACA,KAAAK,iBAAA;EACA;EACAC,OAAA;IACAD,kBAAA;MACA,KAAAE,QAAA,CACAC,GAAA;QAAAJ,MAAA;UAAAJ,EAAA,OAAAA;QAAA;MAAA,GACAS,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,IAAA;UACA,KAAAb,KAAA,GAAAY,QAAA,CAAAb,IAAA;QACA;UACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;IACA;IACAC,IAAAd,EAAA;MAAA;MACA,KAAAe,QAAA;QAAAC,IAAA;MAAA,GAAAP,IAAA,CAAAC,QAAA;QACA,KAAAH,QAAA,CAAAU,MAAA,qBAAAjB,EAAA,EAAAS,IAAA,CAAAS,GAAA;UACA,IAAAA,GAAA,CAAAP,IAAA;YAAA;YACA,KAAAC,QAAA,CAAAO,OAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;YACA,KAAAT,QAAA,CAAAC,KAAA,CAAAK,GAAA,CAAAI,GAAA;UACA;QACA;MACA,GAAAC,KAAA,QACA;IACA;IACAC,gBAAA;MACA,KAAAzB,aAAA;MACA,KAAAE,IAAA,QAAAH,KAAA;IACA;IACA2B,YAAA;MACA,MAAAC,SAAA;QACA1B,EAAA,OAAAF,KAAA,CAAAE,EAAA;QACA2B,IAAA,OAAA1B,IAAA,CAAA0B;MACA;MAEA,KAAApB,QAAA,CAAAqB,GAAA,mBAAAF,SAAA,EACAjB,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,IAAA;UACA,KAAAC,QAAA,CAAAO,OAAA;UACA,KAAApB,aAAA;UACA,KAAA8B,cAAA;QACA;UACA,KAAAjB,QAAA,CAAAC,KAAA,CAAAH,QAAA,CAAAY,GAAA;QACA;MACA,GACAC,KAAA,CAAAV,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;MACA;IACA;IACAgB,eAAA;MACA,KAAAC,SAAA;QACAH,IAAA;QACAI,UAAA;QACAC,QAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}